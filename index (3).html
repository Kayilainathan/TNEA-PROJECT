<!DOCTYPE html>
<html>
<head>
  <title>TNEA Choice List Generator</title>
  <style>
    body {
      font-family: sans-serif;
    }
    table {
      width: 80%;
      margin: 20px auto;
      border-collapse: collapse;
    }
    th, td {
      text-align: left;
      padding: 8px;
      border: 1px solid #ddd;
    }
    th {
      background-color: #f2f2f2;
    }
    #choices {
      display: none;
    }
    #download-btn {
      display: none;
    }
    #results {
      margin-top: 20px;
    }
    #results-text {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>TNEA Choice List Generator</h1>

  <form id="form">
    <label for="name">Enter your name:</label>
    <input type="text" id="name" name="name" required><br><br>

    <label for="cutoff">Enter your cut-off:</label>
    <input type="number" id="cutoff" name="cutoff" required><br><br>

    <label for="num-choices">Enter the number of choices:</label>
    <input type="number" id="num-choices" name="num-1" min="1" max="21" required><br><br>

    <div id="choices-inputs"></div>

    <button type="submit">Generate Choice List</button>
  </form>

  <div id="choices">
    <h2>Your Choices:</h2>
    <table id="choice-table">
      <thead>
        <tr>
          <th>S.No</th>
          <th>College Code</th>
          <th>College Name</th>
          <th>Department</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="results">
    <h2>Possible Choices based on Cut-off:</h2>
    <div id="results-text"></div>
  </div>

  <button id="download-btn">Download Choice List</button>

  <script>
    const form = document.getElementById('form');
    const choicesInput = document.getElementById('choices-inputs');
    const choiceTable = document.getElementById('choice-table').getElementsByTagName('tbody')[0];
    const resultsText = document.getElementById('results-text');
    const downloadBtn = document.getElementById('download-btn');
    const colleges = {
      "1": "CEG", "4": "MIT", "1315": "SSN", "1399": "CIT", "2006": "PSG", "1211": "REC", "1219": "SVCE", 
      "1419": "Sri Sairam", "1216": "Saveetha", "1317": "St.Joseph", "1113": "RMK", "1112": "RMD", "1324": "Sri Sairam Institute", 
      "1450": "Loyola ICAM", "1210": "PANIMALAR", "2005": "GCT Coimbatore", "2377": "PSG iTECH", "1422": "SRM Valliammai", 
      "2718": "SRI KRISHNA", "2739": "SRI ESWAR", "5008": "THIAGARAJAR", "2007": "CIT Coimbatore"
    };

    form.addEventListener('submit', (event) => {
      event.preventDefault();

      const name = document.getElementById('name').value;
      const cutoff = parseFloat(document.getElementById('cutoff').value);
      const numChoices = parseInt(document.getElementById('num-choices').value);

      choiceTable.innerHTML = ''; // Clear previous choices
      resultsText.innerHTML = ''; // Clear previous results

      let choiceCount = 1;
      for (let i = 0; i < numChoices; i++) {
        const choiceInput = document.createElement('input');
        choiceInput.type = 'text';
        choiceInput.name = `choice-${i + 1}`;
        choiceInput.placeholder = 'Enter college code and department (e.g., 1-CEG)';
        choiceInput.required = true;
        choicesInput.appendChild(choiceInput);

        const br = document.createElement('br');
        choicesInput.appendChild(br);
      }

      const choices = Array.from(document.querySelectorAll('[name^="choice-"]')).map(input => input.value);

      choices.forEach(choice => {
        const [collegeCode, department] = choice.split('-');
        const collegeName = colleges[collegeCode] || '-';
        const row = choice