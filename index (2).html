<!DOCTYPE html>
<html>
<head>
  <title>TNEA Choice List Generator</title>
  <style>
    body {
      font-family: sans-serif;
    }
    table {
      width: 80%;
      margin: 20px auto;
      border-collapse: collapse;
    }
    th, td {
      text-align: left;
      padding: 8px;
      border: 1px solid #ddd;
    }
    th {
      background-color: #f2f2f2;
    }
    #choices {
      display: none;
    }
    #download-btn {
      display: none;
    }
    #results {
      margin-top: 20px;
    }
    #results-text {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>TNEA Choice List Generator</h1>

  <form id="form">
    <label for="name">Enter your name:</label>
    <input type="text" id="name" name="name" required><br><br>

    <label for="cutoff">Enter your cut-off:</label>
    <input type="number" id="cutoff" name="cutoff" required><br><br>

    <label for="choices">Enter your choices (separate by commas):</label><br>
    <textarea id="choices" name="choices" rows="10" cols="50" placeholder="Example: 1,4,1315,2006,1399,1211,1219,1419,1216"></textarea><br><br>

    <button type="submit">Generate Choice List</button>
  </form>

  <div id="choices">
    <h2>Your Choices:</h2>
    <table id="choice-table">
      <thead>
        <tr>
          <th>S.No</th>
          <th>College Code</th>
          <th>College Name</th>
          <th>Department</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="results">
    <h2>Possible Choices based on Cut-off:</h2>
    <div id="results-text"></div>
  </div>

  <button id="download-btn">Download Choice List</button>

  <script>
    const form = document.getElementById('form');
    const choicesInput = document.getElementById('choices');
    const choiceTable = document.getElementById('choice-table').getElementsByTagName('tbody')[0];
    const resultsText = document.getElementById('results-text');
    const downloadBtn = document.getElementById('download-btn');
    const choicesDiv = document.getElementById('choices');
    const colleges = {
      "1": "CEG", "4": "MIT", "1315": "SSN", "1399": "CIT", "2006": "PSG", "1211": "REC", "1219": "SVCE", 
      "1419": "Sri Sairam", "1216": "Saveetha", "1317": "St.Joseph", "1113": "RMK", "1112": "RMD", "1324": "Sri Sairam Institute", 
      "1450": "Loyola ICAM", "1210": "PANIMALAR", "2005": "GCT Coimbatore", "2377": "PSG iTECH", "1422": "SRM Valliammai", 
      "2718": "SRI KRISHNA", "2739": "SRI ESWAR", "5008": "THIAGARAJAR", "2007": "CIT Coimbatore"
    };

    form.addEventListener('submit', (event) => {
      event.preventDefault();

      const name = document.getElementById('name').value;
      const cutoff = parseFloat(document.getElementById('cutoff').value);
      const choices = choicesInput.value.trim().split(',');

      choiceTable.innerHTML = ''; // Clear previous choices
      resultsText.innerHTML = ''; // Clear previous results

      let choiceCount = 1;
      choices.forEach(choice => {
        choice = choice.trim();
        const collegeCode = parseInt(choice);
        const collegeName = colleges[collegeCode] || '-';
        const row = choiceTable.insertRow();
        const cell1 = row.insertCell();
        const cell2 = row.insertCell();
        const cell3 = row.insertCell();
        const cell4 = row.insertCell();

        cell1.textContent = choiceCount;
        cell2.textContent = collegeCode;
        cell3.textContent = collegeName;
        cell4.textContent = 'Department'; // You can prompt for department later

        choiceCount++;
      });

      choicesDiv.style.display = 'block'; // Show choices table

      // Display possible choices based on cut-off
      if (cutoff >= 197.5) {
        resultsText.innerHTML += `You have chance of getting ${colleges[1]} , Department<br>`;
      }
      if (cutoff >= 193.5 && cutoff <= 197) {
        resultsText.innerHTML += `You have chance of getting ${colleges[4]} , Department<br>`;
      }
      // Add more cut-off conditions as needed...

      resultsText.innerHTML += '<br>To download the choice list as file, click the "Download Choice List" button.';

      downloadBtn.style.display = 'block'; // Show download button
    });

    downloadBtn.addEventListener('click', () => {
      const name = document.getElementById('name').value;
      const cutoff = parseFloat(document.getElementById('cutoff').value);
      const choices = choicesInput.value.trim().split(',');

      // Construct choice list string
      let choiceList = `TNEA CHOICE LIST\n\nNAME: ${name}\nCut off: ${cutoff}\n\nS.NO\tCOLLEGE CODE\tCOLLEGE NAME\tDEPARTMENT\n`;
      choiceList += '_____________________________________________________________________\n';

      let choiceCount = 1;
      choices.forEach(choice => {
        choice = choice.trim();
        const collegeCode = parseInt(choice);
        const collegeName = colleges[collegeCode] || '-';
        choiceList += `${choiceCount}\t${collegeCode}\t${collegeName}\tDepartment\n`;
        choiceCount++;
      });

      // Create and download the file
      const blob = new Blob([choiceList], { type: 'text/plain' });
      const url = window.URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.setAttribute('download', 'choice_list.txt');
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });
  </script>
</body>
</html>